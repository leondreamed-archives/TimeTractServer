# Migration `20200327111052-up`

This migration has been generated by Leon Si at 3/27/2020, 11:10:52 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_GroupToUser" (
    "A" text  NOT NULL ,
    "B" text  NOT NULL 
) 

ALTER TABLE "public"."Group" DROP CONSTRAINT IF EXiSTS "Group_leader_fkey",
DROP COLUMN "leader";

CREATE UNIQUE INDEX "_GroupToUser_AB_unique" ON "public"."_GroupToUser"("A","B")

CREATE  INDEX "_GroupToUser_B_index" ON "public"."_GroupToUser"("B")

ALTER TABLE "public"."_GroupToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Group"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_GroupToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."_GroupMembers";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200327003913-up..20200327111052-up
--- datamodel.dml
+++ datamodel.dml
@@ -4,20 +4,19 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model User {
   id String @id @default(uuid())
   username String @unique
   password String
   accessToken String?
   rescueTimeData RescueTimeData?
-  groups Group[] @relation("GroupMembers")
+  groups Group[]
   avatarUrl String?
-  leaderOf Group[]
 }
 model RescueTimeData {
   id String @id @default(uuid())
@@ -39,7 +38,6 @@
   id String @id @default(uuid())
   name String @unique
   blurb String @default("")
   description String @default("")
-  leader User
-  members User[] @relation("GroupMembers")
+  members User[]
 }
```


